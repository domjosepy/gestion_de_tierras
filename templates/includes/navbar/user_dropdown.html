{% load static %}

{% if user.is_authenticated %}
<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle d-flex align-items-center pe-0"
       href="javascript:void(0)"
       id="userDropdown"
       role="button"
       data-bs-toggle="dropdown"
       aria-expanded="false">

        <span class="d-none d-lg-inline fw-bold text-white me-2">
            {{ user.get_full_name|default:user.username }}
        </span>
        <span class="badge bg-light text-primary rounded-pill small me-2">
            {{ user.userprofile.get_role_display }}
        </span>
        <img class="img-profile rounded-circle border border-2 border-white"
             src="{% static 'img/undraw_profile_2.svg' %}"
             alt="Perfil" width="40" height="40">
    </a>

    <ul class="dropdown-menu dropdown-menu-end shadow-lg rounded mt-2"
        aria-labelledby="userDropdown">
        <li>
            <a class="dropdown-item d-flex align-items-center" href="{% url 'edit_profile' %}">
                <i class="fas fa-user fa-sm fa-fw text-primary me-2"></i> Editar mi Perfil
            </a>
        </li>
        <li>
            <a class="dropdown-item d-flex align-items-center" href="{% url 'password_change' %}">
                <i class="fas fa-cogs fa-sm fa-fw text-primary me-2"></i> Cambio de contraseña
            </a>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li>
            <a class="dropdown-item d-flex align-items-center" href="{% url 'test_toast' %}" id="testToastBtn">
                <i class="fas fa-bell fa-sm fa-fw text-primary me-2"></i> Probar Toast
            </a>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li>
            <form action="{% url 'logout' %}" method="post">
                {% csrf_token %}
                <button type="submit" class="dropdown-item d-flex align-items-center text-danger">
                    <i class="fas fa-sign-out-alt fa-sm fa-fw text-danger me-2"></i> Cerrar Sesión
                </button>
            </form>
        </li>
    </ul>
</li>
{% else %}
<li class="nav-item">
    <a href="{% url 'login' %}" class="btn btn-outline-light btn-sm me-2">
        <i class="fas fa-sign-in-alt me-1"></i> Iniciar sesión
    </a>
</li>
{% endif %}
<!-- End of User Dropdown -->
 